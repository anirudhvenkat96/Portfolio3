{% assign images = include.images | default: empty %}
{% if images and images.size > 0 %}

{% comment %}
  Unique-ish id so multiple carousels on one page donâ€™t conflict.
{% endcomment %}
{% assign carousel_id = "carousel-" | append: page.slug | append: "-" | append: include.alt | slugify %}

<section class="c-image-carousel" aria-label="{{ include.alt | default: 'Image carousel' | escape }}">
  <div class="c-image-carousel__slider js-image-carousel" data-carousel-id="{{ carousel_id }}">
    {% for img in images %}
      <div class="c-image-carousel__slide">
        <img
          loading="lazy"
          src="{{ img.src | relative_url }}"
          alt="{{ img.alt | default: include.alt | escape }}"
          width="1200"
          height="900"
          style="width:100%; height:auto; display:block; object-fit:cover; border-radius:12px;"
        >
        {% if img.caption %}
          <div class="c-image-carousel__caption">{{ img.caption }}</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  <div class="c-image-carousel__controls" data-controls-container="{{ carousel_id }}">
    <button class="c-image-carousel__btn" type="button" data-controls="prev" aria-label="Previous slide">
      <ion-icon name="arrow-back"></ion-icon>
    </button>
    <button class="c-image-carousel__btn" type="button" data-controls="next" aria-label="Next slide">
      <ion-icon name="arrow-forward"></ion-icon>
    </button>
  </div>

  <div class="c-image-carousel__nav" data-nav-container="{{ carousel_id }}" aria-label="Carousel pagination"></div>
</section>

{% endif %}
